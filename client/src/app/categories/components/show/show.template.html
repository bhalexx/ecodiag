@if (category$|async; as category) {
    <h1>{{ category.icon }}{{ category.name }}</h1>
    <p>{{ category.description }}</p>

    <progress [value]="progress" max="100"></progress>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
        @for (criterion of category.criteria; track $index) {
            <article>
                <header>
                    <mark>{{ category.id }}.{{ $index + 1 }}</mark> {{ criterion.label }}
                </header>

                <criteria-status [formControlName]="'criterion_' + criterion.id"
                                 [criterion]="{id: criterion.id, status: null}"
                                 [groupName]="'criterion_' + criterion.id"
                                 (valueChange)="change($event)" />

                <footer>
                    <details>
                        <summary class="pointer">
                            <strong>ðŸŽ¯ Objectifs et mise en Å“uvre</strong>&nbsp;<small>(cliquez pour dÃ©plier)</small>
                        </summary>
                        <br/>
                        <strong>Objectifs</strong>
                        <blockquote [innerHTML]="criterion.purpose"></blockquote>

                        <strong>Mise en Å“uvre</strong>
                        <blockquote [innerHTML]="criterion.implementation"></blockquote>

                        <strong>Moyen de test ou de contrÃ´le</strong>
                        <blockquote [innerHTML]="criterion.testing"></blockquote>

                        ðŸ”— <a href="https://ecoresponsable.numerique.gouv.fr/publications/referentiel-general-ecoconception/critere/{{ category.id }}.{{ $index + 1 }}" target="_blank">Lien</a>
                    </details>
                </footer>
            </article>
        }

        <div role="group">
            @if (previous) {
                <a routerLink="/categorie/{{ previous}}" role="button" class="primary">CatÃ©gorie prÃ©cÃ©dente</a>
            }
            @if (hasNext) {
                <a routerLink="/" role="button" class="secondary">Retour Ã  la liste</a>
                <button type="submit">CatÃ©gorie suivante</button>
            } @else {
                <button type="submit">Sauver et revenir Ã  la liste</button>
            }
        </div>
    </form>
}
